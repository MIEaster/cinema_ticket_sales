<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dao.MovieDao">
    <select id="allMovie" resultType="com.entity.Movie">
        select * from movie
    </select>

    <insert id="addMovie">
        insert into movie(movie_name,
                          movie_duration,
                          type_name,
                          director,
                          screenwriter,
                          actors_name,
                          release_date,
                          movie_introduction,
                          poster)
                    values (
                            #{movieName},
                            #{movieDuration},
                            #{typeName},
                            #{director},
                            #{screenwriter},
                            #{actorsName},
                            #{releaseDate},
                            #{movieIntroduction},
                            #{poster}
                           )
    </insert>

    <delete id="delete">
        delete from movie where movie_id = #{movieId}

    </delete>

    <select id="getByMovieId" resultType="com.entity.Movie">
        select * from movie where movie_id = #{movieId}
    </select>

    <update id="updateMovie">
        update movie
        <set>
            <if test="movieName != null">
                movie_name=#{movieName}
            </if>
            <if test="movieDuration != null">
                movie_duration=#{movieDuration}
            </if>
            <if test="typeName != null">
                type_name=#{typeName}
            </if>
            <if test="director !=null">
                director=#{director}
            </if>
            <if test="screenwriter !=null">
                screenwriter=#{screenwriter}
            </if>
            <if test="actorsName != null">
                actors_name=#{actorsName}
            </if>
            <if test="releaseDate != null">
                release_date=#{releaseDate}
            </if>
            <if test="movieIntroduction != null">
                movie_introduction=#{movieIntroduction}
            </if>
            <if test="poster != null">
                poster=#{poster}
            </if>

        </set>
        where movie_id=#{movieId}
    </update>

</mapper>